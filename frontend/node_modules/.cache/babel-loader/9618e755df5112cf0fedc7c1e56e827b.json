{"ast":null,"code":"import _slicedToArray from\"/home/mahdi/Desktop/online-shop-linux/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useSelector,useDispatch}from'react-redux';import{saveRecord}from'../actions/recordActions';import{savePayment}from'../actions/paymentActions';import{Link}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Dropdown(){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var recordList=useSelector(function(state){return state.recordList;});var records=recordList.records,loading_=recordList.loading_,error_=recordList.error_;var toggle=function toggle(){if(open){document.querySelector(\".dd-wrapper\").classList.add(\"open\");}else{document.querySelector(\".dd-wrapper\").classList.remove(\"open\");}setOpen(!open);};var handleCart=function handleCart(){setOpen(!open);};var handleClose=function handleClose(){setOpen(!open);};useEffect(function(){},[]);var checkoutHandler=function checkoutHandler(e){e.preventDefault();var totalAmount=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);dispatch(savePayment({cartItems:cartItems,totalAmount:totalAmount,date:new Date()}));cartItems.map(function(item){return addSale(item.name);});function addSale(item){var soldAmount=1;var record=records.map(function(x){return x.item===item;});if(record===null||records.length===0)console.log('records null');records.map(function(x){return console.log('its here'+x);});if(record.length>0){console.log('record found'+record);soldAmount=record.soldAmount+1;}console.log('current sold amount'+soldAmount);dispatch(saveRecord({item:item,soldAmount:soldAmount,date:new Date()}));}};return/*#__PURE__*/_jsxs(\"div\",{children:[\" \",!open?/*#__PURE__*/_jsxs(\"div\",{className:\"cart-title-bar\",onClick:handleCart,children:[\"Cart-\",cartItems.length]}):/*#__PURE__*/_jsxs(\"div\",{className:\"dd-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{tabIndex:0,className:\"dd-header\",role:\"button\",onKeyPress:function onKeyPress(){return toggle(!open);},onClick:function onClick(){return toggle(!open);}}),/*#__PURE__*/_jsx(\"div\",{className:\"dd-header_action\",children:/*#__PURE__*/_jsx(\"p\",{children:open?/*#__PURE__*/_jsx(\"div\",{className:\"close-title-bar\",onClick:handleClose,children:\"X\"}):'Cart-'+cartItems.length})}),/*#__PURE__*/_jsx(\"div\",{className:\"dd-header\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Price\"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.urlImg,className:\"\",alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[item.price,\"$\"]})]},item.product);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-action-nav\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total(\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]}),/*#__PURE__*/_jsx(\"button\",{className:\"button primary full-width pay-button\",id:\"paymentbtn\",onClick:checkoutHandler,disabled:cartItems.length===0,children:cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Add Items to Pay :)\"}):/*#__PURE__*/_jsx(\"div\",{children:\"Pay\"})})]})]})]});}export default Dropdown;","map":{"version":3,"sources":["/home/mahdi/Desktop/online-shop-linux/frontend/src/Dropdown/Dropdown.js"],"names":["React","useState","useEffect","addToCart","removeFromCart","useSelector","useDispatch","saveRecord","savePayment","Link","Dropdown","cart","state","cartItems","dispatch","open","setOpen","recordList","records","loading_","error_","toggle","document","querySelector","classList","add","remove","handleCart","handleClose","checkoutHandler","e","preventDefault","totalAmount","reduce","a","c","price","qty","date","Date","map","item","addSale","name","soldAmount","record","x","length","console","log","urlImg","product"],"mappings":"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","sourcesContent":["import React, {useState,useEffect } from 'react';\nimport {addToCart,removeFromCart} from '../actions/cartActions';\nimport {useSelector,useDispatch} from 'react-redux';\nimport {saveRecord} from '../actions/recordActions';\nimport {\n    savePayment,\n  } from '../actions/paymentActions';\n\nimport {\n    Link\n  } from \"react-router-dom\";\n\nfunction Dropdown(){\n    const cart = useSelector(state => state.cart);\n    const {cartItems} = cart;\n    const dispatch = useDispatch();\n    const [open , setOpen] = useState(false);\n\n    const recordList = useSelector(state=> state.recordList);\n    const { records, loading_ , error_ } = recordList;\n\n\n\n\n    const toggle = ()=> {\n        if(open){\n          document.querySelector(\".dd-wrapper\").classList.add(\"open\");\n            \n        }\n        else{\n            document.querySelector(\".dd-wrapper\").classList.remove(\"open\");\n        }\n        setOpen(!open);\n    }\n\n    const handleCart= ()=>{\n        setOpen(!open);\n    }\n    const handleClose= ()=>{\n        setOpen(!open);\n    }\n    useEffect(()=>{\n\n    },[]);\n\n    const checkoutHandler = (e) => {\n        e.preventDefault();\n        const totalAmount= cartItems.reduce((a,c) =>a + c.price* c.qty, 0);\n        dispatch(\n          savePayment({\n              cartItems,\n              totalAmount,\n              date:new Date(),\n          })\n        );\n        cartItems.map(item=> \n                    addSale(item.name)\n        );\n       function addSale(item){\n        let soldAmount=1;\n        const record = records.map(x=>\n            x.item === item); \n        if(record===null || records.length===0)\n            console.log('records null')\n        records.map(x=>\n            console.log('its here'+x)\n               ); \n        if(record.length>0){\n          console.log('record found'+record);\n          soldAmount = record.soldAmount+1; \n        }\n        console.log('current sold amount'+soldAmount);\n\n        dispatch(saveRecord({\n            item,\n            soldAmount,\n            date:new Date()\n        }))\n       }\n\n\n    };\n    return <div> {!open?  <div className=\"cart-title-bar\" onClick={handleCart}>Cart-{cartItems.length}</div>\n    :\n    <div className=\"dd-wrapper\">\n                    <div \n            tabIndex={0}\n             className=\"dd-header\"\n              role=\"button\" \n              onKeyPress={()=>toggle(!open)}\n            onClick={()=>toggle(!open)}></div>\n                    <div className=\"dd-header_action\">\n                <p>{open?<div className=\"close-title-bar\" onClick={handleClose}>X</div>: 'Cart-'+cartItems.length}</p>\n            </div>\n        <div className=\"dd-header\">\n            <ul className=\"cart-list-container\">\n                    <h3>\n                        Shopping Cart\n                    </h3>\n                <li>\n\n                    <div>\n                    Product\n                    </div>\n                    <div>\n                    Price\n                    </div>\n                </li>\n                {\n                    cartItems.length === 0 ?\n                    <div>\n                        Cart is empty\n                    </div>\n                    :\n                    cartItems.map(item=> \n                        <li key={item.product}> \n                            \n                               <div className=\"cart-image\">\n                                    <img src={item.urlImg} className=\"\" alt=\"product\"/>\n                                </div>\n                                <div className=\"cart-name\">\n                                    <div>\n                                        <Link to={\"/product/\"+ item.product}>\n                                        {item.name}\n                                        </Link>\n                                    </div>\n                                    <div>\n                                    </div>\n                                </div>\n                                <div className=\"cart-price\"> \n                                    {item.price}$\n                                </div>\n                        </li>\n                        )\n                     }\n            </ul>\n        </div>\n        <div className=\"cart-action-nav\">\n            <h3>\n                Total({cartItems.reduce((a,c)=>a+c.qty,0)} items)\n                :\n            ${cartItems.reduce((a,c) =>a + c.price* c.qty, 0)}\n            </h3>\n            <button className= \"button primary full-width pay-button\"\n            id=\"paymentbtn\"\n             onClick={checkoutHandler}\n              disabled={cartItems.length===0}>\n                  {cartItems.length === 0 ? <div>Add Items to Pay :)</div> : <div>Pay</div>}\n            </button>\n        </div>\n    </div> }\n    </div>\n}\n\nexport default Dropdown;"]},"metadata":{},"sourceType":"module"}