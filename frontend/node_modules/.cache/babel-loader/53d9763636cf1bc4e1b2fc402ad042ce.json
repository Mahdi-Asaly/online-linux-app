{"ast":null,"code":"import _slicedToArray from\"/home/mahdi/Desktop/online-shop-linux/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import axios from'axios';import{saveProduct,listProducts,deleteProduct}from'../actions/productActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductsScreen(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVisible=_useState2[0],setModalVisible=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),urlImg=_useState10[0],setImage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,products=productList.products,error=productList.error;var productSave=useSelector(function(state){return state.productSave;});var loadingSave=productSave.loading,successSave=productSave.success,errorSave=productSave.error;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,successDelete=productDelete.success,errorDelete=productDelete.error;var dispatch=useDispatch();useEffect(function(){if(successSave){setModalVisible(false);}dispatch(listProducts());return function(){//\n};},[successSave,successDelete]);var openModal=function openModal(product){setModalVisible(true);setId(product._id);setName(product.name);setPrice(product.price);setDescription(product.description);setImage(product.urlImg);setCountInStock(product.countInStock);};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(saveProduct({_id:id,name:name,urlImg:urlImg,description:description,price:price,countInStock:countInStock}));};var deleteHandler=function deleteHandler(product){alert(product._id);dispatch(deleteProduct(product._id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"content content-margined\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Managing Products - Admin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button primary\",onClick:function onClick(){return openModal({});},children:\"New Product\"})]}),modalVisible&&/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(\"ul\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Product Details\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[loadingSave&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),errorSave&&/*#__PURE__*/_jsx(\"div\",{children:errorSave})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:name,id:\"name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"url Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:urlImg,id:\"name\",onChange:function onChange(e){return setImage(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price\",value:price,id:\"price\",onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStock\",children:\"CountInStock\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"countInStock\",value:countInStock,id:\"countInStock\",onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:description,id:\"description\",onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button primary\",children:id?'Update':'Create'})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setModalVisible(false);},className:\"button secondary\",children:\"Back\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"product-list\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"urlImg\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.urlImg}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.description}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return openModal(product);},children:\"Edit\"}),' ',/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return deleteHandler(product);},children:\"Delete\"})]})]},product._id);})})]})})]});}export default ProductsScreen;","map":{"version":3,"sources":["/home/mahdi/Desktop/online-shop-linux/frontend/src/screens/ProductsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","saveProduct","listProducts","deleteProduct","ProductsScreen","props","modalVisible","setModalVisible","id","setId","name","setName","price","setPrice","urlImg","setImage","countInStock","setCountInStock","description","setDescription","productList","state","loading","products","error","productSave","loadingSave","successSave","success","errorSave","productDelete","loadingDelete","successDelete","errorDelete","dispatch","openModal","product","_id","submitHandler","e","preventDefault","deleteHandler","alert","target","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport {\n  saveProduct,\n  listProducts,\n  deleteProduct,\n} from '../actions/productActions';\n\nfunction ProductsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [urlImg, setImage] = useState('');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const productList = useSelector((state) => state.productList);\n  const { loading, products, error } = productList;\n\n  const productSave = useSelector((state) => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave,\n  } = productSave;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete,\n  } = productDelete;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n    dispatch(listProducts());\n    return () => {\n      //\n    };\n  }, [successSave, successDelete]);\n\n  const openModal = (product) => {\n    setModalVisible(true);\n    setId(product._id);\n    setName(product.name);\n    setPrice(product.price);\n    setDescription(product.description);\n    setImage(product.urlImg);\n    setCountInStock(product.countInStock);\n  };\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      saveProduct({\n        _id: id,\n        name,\n        urlImg,\n        description,\n        price,\n        countInStock,\n      })\n    );\n  };\n\n\n\n  const deleteHandler = (product) => {\n    alert(product._id)\n    dispatch(deleteProduct(product._id));\n  };\n\n  return (\n    <div className=\"content content-margined\">\n      <div className=\"product-header\">\n        <h3>Managing Products - Admin</h3>\n        <button className=\"button primary\" onClick={() => openModal({})}>\n          New Product\n        </button>\n      </div>\n      {modalVisible && (\n        <div className=\"form\">\n          <form onSubmit={submitHandler}>\n            <ul className=\"form-container\">\n              <li>\n                <h2>Product Details</h2>\n              </li>\n              <li>\n                {loadingSave && <div>Loading...</div>}\n                {errorSave && <div>{errorSave}</div>}\n              </li>\n\n              <li>\n                <label htmlFor=\"name\">Name</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={name}\n                  id=\"name\"\n                  onChange={(e) => setName(e.target.value)}\n                ></input>\n              </li>\n              <li>\n                <label htmlFor=\"name\">url Image</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={urlImg}\n                  id=\"name\"\n                  onChange={(e) => setImage(e.target.value)}\n                ></input>\n              </li>             \n              <li>\n                <label htmlFor=\"price\">Price</label>\n                <input\n                  type=\"text\"\n                  name=\"price\"\n                  value={price}\n                  id=\"price\"\n                  onChange={(e) => setPrice(e.target.value)}\n                ></input>\n              </li>\n\n\n              <li>\n                <label htmlFor=\"countInStock\">CountInStock</label>\n                <input\n                  type=\"text\"\n                  name=\"countInStock\"\n                  value={countInStock}\n                  id=\"countInStock\"\n                  onChange={(e) => setCountInStock(e.target.value)}\n                ></input>\n              </li>\n\n              <li>\n                <label htmlFor=\"description\">Description</label>\n                <textarea\n                  name=\"description\"\n                  value={description}\n                  id=\"description\"\n                  onChange={(e) => setDescription(e.target.value)}\n                ></textarea>\n              </li>\n              <li>\n                <button type=\"submit\" className=\"button primary\">\n                  {id ? 'Update' : 'Create'}\n                </button>\n              </li>\n              <li>\n                <button\n                  type=\"button\"\n                  onClick={() => setModalVisible(false)}\n                  className=\"button secondary\"\n                >\n                  Back\n                </button>\n              </li>\n            </ul>\n          </form>\n        </div>\n      )}\n\n      <div className=\"product-list\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Name</th>\n              <th>urlImg</th>\n              <th>Price</th>\n              <th>Description</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.name}</td>\n                <td>{product.urlImg}</td>\n                <td>{product.price}</td>\n                <td>{product.description}</td>\n                <td>\n                  <button className=\"button\" onClick={() => openModal(product)}>\n                    Edit\n                  </button>{' '}\n                  <button\n                    className=\"button\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\nexport default ProductsScreen;"]},"metadata":{},"sourceType":"module"}