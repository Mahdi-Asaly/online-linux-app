{"ast":null,"code":"import React,{useEffect}from'react';import{listPayments}from'../actions/paymentActions';import{listRecords}from'../actions/recordActions';import{useSelector,useDispatch}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StatsScreen(props){var dispatch=useDispatch();var paymentsList=useSelector(function(state){return state.paymentList;});var recordList=useSelector(function(state){return state.recordList;});var payments=paymentsList.payments,loading=paymentsList.loading,error=paymentsList.error;var records=recordList.records,loading_=recordList.loading_,error_=recordList.error_;function getTopSold(){var items=[];records.map(function(x){return items.push(x.item);});var counts={};items.forEach(function(x){counts[x]=(counts[x]||0)+1;});var myJSON=JSON.stringify(counts);console.log(\"items:\",myJSON);return myJSON;}//fetching data from server\nuseEffect(function(){dispatch(listPayments());return function(){};},[]);//fetching data from server\nuseEffect(function(){getTopSold();dispatch(listRecords());return function(){};},[]);return loading?/*#__PURE__*/_jsx(\"div\",{children:\"loading..\"}):error?/*#__PURE__*/_jsx(\"div\",{children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[payments.length<1?/*#__PURE__*/_jsx(\"div\",{children:\"no payments yet\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-sel-payment\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top 5 Sel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-payment-name\",children:getTopSold()}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"unique-sel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top 5 unique sel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-payment-name\",children:getTopSold()}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"past-days-sel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Past 5 days $\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-payment-name\",children:getTopSold()}),/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-sel-payment\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"all payments\"}),payments.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"gaps\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-payment-name\",children:[\"Product: \",item.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-payment-price\",children:[\"Total Money gained: \",item.totalAmount,\"$\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-payment-price\",children:[\"Sold at: \",item.date]})]},item.product);})]})]});}export default StatsScreen;","map":{"version":3,"sources":["/home/mahdi/Desktop/online-shop-linux/frontend/src/screens/StatsScreen.js"],"names":["React","useEffect","listPayments","listRecords","useSelector","useDispatch","StatsScreen","props","dispatch","paymentsList","state","paymentList","recordList","payments","loading","error","records","loading_","error_","getTopSold","items","map","x","push","item","counts","forEach","myJSON","JSON","stringify","console","log","length","name","totalAmount","date","product"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport { listPayments} from '../actions/paymentActions';\nimport { listRecords} from '../actions/recordActions';\nimport { useSelector, useDispatch} from 'react-redux';\n\n\nfunction StatsScreen(props){\n\n    const dispatch = useDispatch();\n    const paymentsList = useSelector(state=> state.paymentList);\n    const recordList = useSelector(state=> state.recordList);\n    const { payments, loading , error } = paymentsList;\n    const { records, loading_ , error_ } = recordList;\n    function getTopSold(){\n        let items = [];\n        records.map(x=>\n            items.push(x.item)\n        )\n        var counts = {};\n        items.forEach(function(x) { counts[x] = (counts[x] || 0)+1; });\n        const myJSON = JSON.stringify(counts);\n        console.log(\"items:\",myJSON);\n        return myJSON;\n    }\n    //fetching data from server\n    useEffect(()=>{\n        dispatch(listPayments());\n        return ()=>{\n        };\n    },[])\n    //fetching data from server\n    useEffect(()=>{\n        getTopSold() \n        dispatch(listRecords());\n        return ()=>{\n        };\n    },[])\n\n\n    return loading? <div>loading..</div>:error ? <div>{error}</div>:     <div>\n            {payments.length<1 ? <div>no payments yet</div> :\n            <div className=\"container\">\n\n            <div className=\"top-sel-payment\">\n\n                <h2>Top 5 Sel</h2>\n            <div className=\"gaps\"></div>    \n\n                <div className=\"item-payment-name\">\n                    {getTopSold()}\n                </div>\n                <div className=\"gaps\"></div>    \n\n            </div>\n\n            <div className=\"unique-sel\"> \n\n                <h2>Top 5 unique sel</h2>\n                <div className=\"gaps\"></div>    \n                <div className=\"item-payment-name\">\n                    {getTopSold()}\n                </div>\n                <div className=\"gaps\"></div>    \n            </div>\n            <div className=\"past-days-sel\"> \n\n                <h2>Past 5 days $</h2>\n                <div className=\"gaps\"></div>    \n\n                <div className=\"item-payment-name\">\n                    {\n                        getTopSold()\n                    }\n                </div>\n                <div className=\"gaps\"></div>    \n\n            </div>\n\n\n            </div>\n            \n            }\n\n<div className=\"top-sel-payment\">\n                <h2>all payments</h2>\n                {\n               payments.map(item=> \n                <li key={item.product}> \n                        <div className=\"gaps\"></div>                     \n\n                        <div className=\"item-payment-name\">\n                            Product: {item.name}\n                        </div>\n                        <div className=\"item-payment-price\"> \n                            Total Money gained: {item.totalAmount}$\n                        </div>\n                        <div className=\"item-payment-price\"> \n                            Sold at: {item.date}\n                        </div>         \n                </li>\n                 )} \n            </div>\n    </div>\n}\n\nexport default StatsScreen;"]},"metadata":{},"sourceType":"module"}