{"ast":null,"code":"import _toConsumableArray from\"/home/mahdi/Desktop/online-shop-linux/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useSelector,useDispatch}from'react-redux';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(props){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var removeFromCartHandler=function removeFromCartHandler(productId){dispatch(removeFromCart(productId));};useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[]);var checkoutHandler=function checkoutHandler(){props.history.push(\"/redirect=shipping\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"cart-list-container\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Price\"})]}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.urlImg,className:\"\",alt:\"product\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+item.product,children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Qty:\",/*#__PURE__*/_jsx(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,e.target.value));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[item.price,\"$\"]})]},item.product);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-action\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"subTotal(\",cartItems.reduce(function(a,c){return a+c.qty;},0),\" items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.qty;},0)]}),/*#__PURE__*/_jsx(\"button\",{className:\"button primary full-width\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to CheckOut\"})]})]});}export default CartScreen;","map":{"version":3,"sources":["/home/mahdi/Desktop/online-shop-linux/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","addToCart","removeFromCart","useSelector","useDispatch","Link","CartScreen","props","cart","state","cartItems","productId","match","params","id","qty","location","search","Number","split","dispatch","removeFromCartHandler","checkoutHandler","history","push","length","map","item","urlImg","product","name","e","target","value","Array","countInStock","keys","x","price","reduce","a","c"],"mappings":"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","sourcesContent":["import React, {useEffect } from 'react';\nimport {addToCart,removeFromCart} from '../actions/cartActions';\nimport {useSelector,useDispatch} from 'react-redux';\nimport {\n    Link\n  } from \"react-router-dom\";\n\nfunction CartScreen(props){\n    const cart = useSelector(state => state.cart);\n    const {cartItems} = cart;\n\n    const productId = props.match.params.id;\n    const qty = props.location.search? Number(props.location.search.split(\"=\")[1]):1;\n    const dispatch = useDispatch();\n\n\n\n\n    const removeFromCartHandler = (productId) =>{\n        dispatch(removeFromCart(productId));\n    }\n    useEffect(()=>{\n        if(productId)\n        {\n            dispatch(addToCart(productId,qty));\n        }\n    },[]);\n    const checkoutHandler = () =>{\n        props.history.push(\"/redirect=shipping\");\n    }\n    return <div className=\"cart\">\n        <div className=\"cart-list\">\n            <ul className=\"cart-list-container\">\n                <li>\n                    <h3>\n                        Shopping Cart\n                    </h3>\n                    <div>\n                    Price\n                    </div>\n                </li>\n                {\n                    cartItems.length === 0 ?\n                    <div>\n                        cart is empty\n                    </div>\n                    :\n                    cartItems.map(item=> \n                        <li key={item.product}> \n                               <div className=\"cart-image\">\n                                    <img src={item.urlImg} className=\"\" alt=\"product\"/>\n                                </div>\n                                <div className=\"cart-name\">\n                                    <div>\n                                        <Link to={\"/product/\"+ item.product}>\n                                        {item.name}\n                                        </Link>\n                                    </div>\n                                    <div>\n                                        Qty:\n                                        <select value={item.qty} onChange={(e)=> dispatch(addToCart(item.product, e.target.value))}>\n                                            {[...Array(item.countInStock).keys()].map(x=>\n                                                <option key={x+1} value={x+1}>{x+1}</option>)\n                                            }\n                                        </select>\n                                        <button type=\"button\" className=\"button\" onClick={()=>removeFromCartHandler(item.product)}>\n                                            Delete\n                                        </button>\n                                    </div>\n                                </div>\n                                <div className=\"cart-price\"> \n                                    {item.price}$\n                                </div>\n                        </li>\n                        )\n                     }\n            </ul>\n        </div>\n        <div className=\"cart-action\">\n            <h3>\n                subTotal({cartItems.reduce((a,c)=>a+c.qty,0)} items)\n                :\n            ${cartItems.reduce((a,c) =>a + c.price* c.qty, 0)}\n            </h3>\n            <button className= \"button primary full-width\" onClick={checkoutHandler} disabled={cartItems.length===0}>Proceed to CheckOut</button>\n        </div>\n    </div>\n}\n\nexport default CartScreen;"]},"metadata":{},"sourceType":"module"}